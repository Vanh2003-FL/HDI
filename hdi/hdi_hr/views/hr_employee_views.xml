<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Employee Form View Extension -->
    <record id="view_hr_employee_form_hdi" model="ir.ui.view">
        <field name="name">hr.employee.form.hdi</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <!-- Add HDI fields to header -->
            <xpath expr="//header" position="inside">
                <button name="action_start_onboarding" string="Bắt đầu Onboarding" 
                        type="object" class="btn-primary" 
                        invisible="hdi_is_onboarding or hdi_employee_type != 'probation'"/>
                <button name="action_convert_to_permanent" string="Chuyển chính thức" 
                        type="object" class="btn-success" 
                        invisible="hdi_employee_type != 'probation'"/>
                <button name="action_view_evaluations" string="Xem đánh giá" 
                        type="object" class="btn-info"/>
            </xpath>

            <!-- Add status bar -->
            <xpath expr="//field[@name='user_id']" position="after">
                <field name="hdi_employee_code"/>
                <field name="hdi_employee_type"/>
            </xpath>

            <!-- Add new page for HDI info -->
            <xpath expr="//notebook" position="inside">
                <page string="Thông tin HDI">
                    <group>
                        <group string="Thông tin công việc">
                            <field name="hdi_onboard_date"/>
                            <field name="hdi_probation_end_date"/>
                            <field name="hdi_contract_type"/>
                            <field name="hdi_is_onboarding"/>
                            <field name="hdi_onboarding_progress" widget="progressbar" invisible="not hdi_is_onboarding"/>
                        </group>
                        <group string="Giấy tờ tùy thân">
                            <field name="hdi_id_number"/>
                            <field name="hdi_id_issue_date"/>
                            <field name="hdi_id_issue_place"/>
                            <field name="hdi_tax_code"/>
                            <field name="hdi_social_insurance_number"/>
                        </group>
                    </group>
                    <group>
                        <group string="Địa chỉ">
                            <field name="hdi_permanent_address"/>
                            <field name="hdi_current_address"/>
                        </group>
                        <group string="Liên hệ khẩn cấp">
                            <field name="hdi_emergency_contact_name"/>
                            <field name="hdi_emergency_contact_phone"/>
                            <field name="hdi_emergency_contact_relation"/>
                        </group>
                    </group>
                </page>
                
                <page string="Học vấn &amp; Kinh nghiệm">
                    <group>
                        <group string="Học vấn">
                            <field name="hdi_education_level"/>
                            <field name="hdi_major"/>
                            <field name="hdi_university"/>
                            <field name="hdi_graduation_year"/>
                        </group>
                        <group string="Kinh nghiệm">
                            <field name="hdi_total_experience"/>
                        </group>
                    </group>
                </page>
                
                <page string="Kỹ năng">
                    <field name="hdi_skill_ids" widget="one2many" context="{'list_view_ref': 'hdi_hr.view_hdi_employee_skill_list'}"/>
                </page>
                
                <page string="Thống kê">
                    <group>
                        <group string="Nghỉ phép">
                            <field name="hdi_total_leave_days"/>
                            <field name="hdi_remaining_leave_days"/>
                        </group>
                        <group string="Hiệu suất">
                            <field name="hdi_total_overtime_hours"/>
                            <field name="hdi_average_performance_score"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
    
    <!-- Employee Action -->
    <record id="action_hdi_hr_employee" model="ir.actions.act_window">
        <field name="name">Nhân viên</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">list,form,kanban</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Thêm nhân viên mới
            </p>
        </field>
    </record>
    
</odoo>
