<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="view_ngsc_innovation_scoring_wizard_form" model="ir.ui.view">
      <field name="name">ngsc.innovation.scoring.wizard.form</field>
      <field name="model">ngsc.innovation.scoring.wizard</field>
      <field name="arch" type="xml">
        <form string="Chấm điểm - Chỉ tiêu chí loại Điểm">
          <sheet>
            <!-- Bảng chấm điểm - UI đơn giản như yêu cầu -->
            <field name="scoring_line_ids" nolabel="1">
              <list editable="bottom">
                <!-- Ẩn các field không cần thiết -->
                <field name="criteria_id" invisible="1"/>
                <field name="criteria_type" invisible="1"/>
                <field name="max_score_point" invisible="1"/>

                <!-- Cột 1: Tiêu chí (50% chiều rộng) -->
                <field name="criteria_name"
                  string="Tiêu chí"
                  readonly="1"
                  force_save="1"/>

                <!-- Cột 2: Số điểm (50% chiều rộng) -->
                <field name="score_point"
                  string="Số điểm"
                  required="1"
                  decoration-danger="score_point &gt; max_score_point"
                  decoration-warning="score_point == 0"/>
              </list>
            </field>

          </sheet>

          <footer>
            <button name="action_submit_scores"
              string="Lưu điểm chấm"
              type="object"
              class="btn-primary"/>
            <button string="Hủy bỏ"
              class="btn-secondary"
              special="cancel"/>
          </footer>
        </form>
      </field>
    </record>

    <!-- Action cho wizard -->
    <record id="action_ngsc_innovation_scoring_wizard" model="ir.actions.act_window">
      <field name="name">Chấm điểm ý tưởng - Chỉ tiêu chí loại Điểm</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">ngsc.innovation.scoring.wizard</field>
      <field name="view_mode">form</field>
      <field name="target">new</field>
      <field name="context">{
        'default_idea_id': active_id,
        }
      </field>
    </record>

    <!-- Menu action có thể gọi từ ý tưởng -->
    <record id="action_score_idea" model="ir.actions.act_window">
      <field name="name">Chấm điểm</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">ngsc.innovation.scoring.wizard</field>
      <field name="view_mode">form</field>
      <field name="target">new</field>
      <field name="binding_model_id" ref="base.model_res_partner"/>
      <field name="binding_view_types">form</field>
    </record>
  </data>
</odoo>