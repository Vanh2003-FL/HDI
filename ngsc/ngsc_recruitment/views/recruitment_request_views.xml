<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="action_recruitment_request_all" model="ir.actions.act_window">
        <field name="name">Tất cả yêu cầu</field>
        <field name="res_model">hr.recruitment.request</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="action_my_recruitment_request_action" model="ir.actions.act_window">
        <field name="name">Yêu cầu được phân công</field>
        <field name="res_model">hr.recruitment.request</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('hr_id.user_id', '=', uid)]</field>
    </record>

    <record id="view_my_recruitment_request_tree" model="ir.ui.view">
        <field name="name">hr.my.recruitment.request.tree</field>
        <field name="model">hr.recruitment.request</field>
        <field name="arch" type="xml">
            <list>
                <field name="date_request"/>
                <field name="department_id"/>
                <field name="name"/>
                <field name="employee_id"/>
                <field name="hr_id" widget="many2many_tags"/>
                <field name="request_type"/>
                <field name="job_quantity"/>
                <field name="state"/>
                <field name="job_position" optional="hide"/>
                <field name="expected_start_date" optional="hide"/>
                <field name="en_location_id" optional="hide"/>
            </list>
        </field>
    </record>

    <record id="view_recruitment_request_form" model="ir.ui.view">
      <field name="name">hr.recruitment.request.form</field>
      <field name="model">hr.recruitment.request</field>
      <field name="arch" type="xml">
        <form string="Yêu cầu tuyển dụng">
            <header>
                <field name="approve_ok" invisible="1"/>
                <field name="is_proposer" invisible="1"/>
                <button string="Gửi duyệt" type="object" name="button_to_approve" attrs="{'invisible': ['|', ('is_proposer','=', False), ('state','!=','draft')]}"/>
                <button string="Duyệt" type="object" name="button_approved" attrs="{'invisible': ['|', ('state','!=','to_approve'), ('approve_ok','=', False)]}"/>
                <button string="Từ chối" type="object" name="button_refused" attrs="{'invisible': ['|', ('state','!=','to_approve'), ('approve_ok','=', False)]}"/>
                <button string="Hủy" type="object" name="button_cancel" attrs="{'invisible': ['|', ('is_proposer','=', False), ('state','=','approved')]}"/>
                <field name="state" widget="statusbar" statusbar_visible="draft,to_approve,approved"/>
            </header>
            <sheet>
                <div class="" style="width:50%;">
                    <h1>
                        <field name="name" placeholder="Tên yêu cầu" nolabel="1" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="date_request" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="employee_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="employee_barcode"/>
                        <field name="position"/>
                    </group>
                    <group>
                        <xpath expr="." position="inside">
                            <link rel="stylesheet" type="text/css" href="/ngsc_recruitment/static/src/css/radio_style.css"/>
                        </xpath>
                        <field name="department_id"/>
                        <field name="en_department_id"/>
                        <field name="total_employee"/>
                        <field name="boundary_number"/>
                        <field name="request_type" widget="radio" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="replace_employee_ids"
                               widget="many2many_tags"
                               attrs="{'invisible': [('request_type','!=','replace')],
                                       'required': [('request_type','=','replace')],
                                       'readonly': [('state', '!=', 'draft')]}"/>
                    </group>
                </group>
                <!-- Tab mới: Thông tin tuyển dụng -->
<!--                <page string="Thông tin tuyển dụng">-->
                <group>
                    <separator string="Thông tin tuyển dụng"/>
                    <group name="col_left">
                        <field name="job_position" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="job_quantity" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="expected_start_date" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="en_location_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="currency_id" invisible="1"/>
                        <label for="expected_salary_from" string="Mức lương dự kiến"/>
                        <div>
                            <field name="expected_salary_from" attrs="{'readonly': [('state', '!=', 'draft')]}" />
                            <span style="margin: 0 10px;"><i class="fa fa-arrow-right"></i></span>
                            <field name="expected_salary_to" attrs="{'readonly': [('state', '!=', 'draft')]}" />
                        </div>
                    </group>
                    <group>
<!--                        <field name="gender" attrs="{'readonly': [('state', '!=', 'draft')]}"/>-->
                        <field name="level_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="education_level" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="certificates" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="years_of_experience" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="foreign_lang" widget="many2many_tags" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    </group>
                </group>
<!--                </page>-->
                <!-- Tab mới: Thông tin tuyển dụng -->
<!--            <page string="Dành riêng cho Trưởng phòng Nguồn lực">-->
                <group>
                    <separator string="Dành riêng cho Trưởng phòng Nguồn lực"/>
                    <group>
                        <field name="is_manager_hr" invisible="1"/>
                        <field name="hr_id" widget="many2many_tags" attrs="{'readonly': [('is_manager_hr', '=', False)]}"/>
<!--                        <field name="hr_id" attrs="{'readonly': ['|', ('is_manager_hr', '=', False), ('state', '=', 'approved')]}"/>-->
                    </group>
                </group>
<!--            </page>-->
                <notebook>
                    <page string="Mô tả công việc">
                            <field name="text_job_description" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    </page>
                    <page string="Yêu cầu công việc">
                            <field name="text_job_requirement" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    </page>
                    <page string="Quyền lợi">
                            <field name="text_job_benefit" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    </page>
                    <page string="Thông tin phê duyệt">
                    </page>
                </notebook>
            </sheet>
            <chatter/><field name="message_follower_ids" widget="mail_followers"/>
                <field name="activity_ids" widget="mail_activity"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
        </form>
      </field>
    </record>

    <record id="view_recruitment_request_tree" model="ir.ui.view">
        <field name="name">hr.recruitment.request.tree</field>
        <field name="model">hr.recruitment.request</field>
        <field name="arch" type="xml">
            <list>
                <field name="date_request"/>
                <field name="department_id"/>
                <field name="name"/>
                <field name="employee_id"/>
                <field name="hr_id"/>
                <field name="request_type"/>
                <field name="job_quantity"/>
                <field name="state"/>
                <field name="job_position" optional="hide"/>
                <field name="expected_start_date" optional="hide"/>
                <field name="en_location_id" optional="hide"/>
            </list>
        </field>
    </record>

    <record id="view_recruitment_request_search" model="ir.ui.view">
       <field name="name">hr.recruitment.request.search</field>
        <field name="model">hr.recruitment.request</field>
        <field name="arch" type="xml">
            <search string="">
                <field name="name"/>
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="job_position"/>
                <field name="hr_id"/>
            </search>
       </field>
    </record>

</odoo>