<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Gắn CSS vào layout backend -->
    <template id="theme_variables" inherit_id="web.layout" name="Backend Theme Variables">
        <xpath expr="//head" position="inside">
            <link rel="stylesheet" type="text/css" href="/backend_theme_custom/static/src/css/theme.css"/>
            <t t-set="theme_image" t-value="request.env['theme.option'].sudo().search([('active_theme','=',True)], limit=1)"/>
            <t t-set="bg_color" t-value="request.env['ir.config_parameter'].sudo().get_param('theme.background_color')"/>
            <t t-set="header_color" t-value="request.env['ir.config_parameter'].sudo().get_param('theme.header_color')"/>
            <t t-set="button_color" t-value="request.env['ir.config_parameter'].sudo().get_param('theme.button_color')"/>
            <t t-set="bg_image" t-value="theme_image.get_bg_image_data_uri() if theme_image else ''"/>
            <style>
                :root {
                    --backend-bg-color: <t t-esc="bg_color"/>;
                    --backend-header-color: <t t-esc="header_color "/>;
                    --backend-button-color: <t t-esc="button_color "/>;
                    <t t-if="bg_image">
                    --backend-bg-image: url(<t t-esc="bg_image"/>);
                    </t>
                }
            </style>
        </xpath>
    </template>
</odoo>