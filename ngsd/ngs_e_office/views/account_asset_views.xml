<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.actions.act_window" id="account_asset.action_account_asset_form">
        <field name="name">Assets</field>
        <field name="context">{'asset_type': 'purchase', 'default_asset_type': 'purchase', 'view_all_hr_employee': True}</field>
    </record>

    <record id="ngs_view_account_asset_form" model="ir.ui.view">
        <field name="name">ngs_view_account_asset_form</field>
        <field name="model">account.asset</field>
        <field name="inherit_id" ref="account_asset.view_account_asset_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group" position="replace">
                <group>
                    <field name="asset_type" invisible="1"/>
                    <field name="active" invisible="1"/>
                    <group string="Tài sản">
                        <field name="code"/>
                        <field name="category"/>
                        <field name="category_other" attrs="{'invisible': [('category', '!=', 'other')]}"/>
                        <field name="partner_id"/>
                        <field name="quality"/>
                        <field name="acquisition_date" attrs="{'invisible': [('state', '=', 'model')]}"/>
                        <field name="invoice_number"/>
                        <field name="original_value" attrs="{'invisible': [('state', '=', 'model')]}"/>
                        <field name="current_amount"/>
                        <field name="currency_id" readonly="0"/>
                        <field name="gross_increase_value" widget="monetary" attrs="{'invisible': ['|', ('state', '=', 'model'), ('gross_increase_value', '=', 0)]}" options="{'currency_field': 'currency_id'}"/>
                    </group>
                    <group string="Bàn giao">
                        <field name="employee_id" context="{'view_all_hr_employee': True}"/>
                        <field name="employee_barcode"/>
                        <field name="current_location"/>
                        <field name="project_id"/>
                        <field name="delivery_date"/>
                        <field name="retrieve_date"/>
                        <field name="liquidation_date"/>
                    </group>
                    <group string="Sửa chữa">
                        <field name="repair_number"/>
                        <field name="repair_total_amount"/>
                        <field name="repair_ids" nolabel="1" colspan="2">
                            <list editable="bottom">
                                <field name="sequence"/>
                                <field name="name"/>
                                <field name="date"/>
                                <field name="amount"/>
                                <field name="currency_id"/>
                            </list>
                        </field>
                    </group>
                </group>
            </xpath>
            <xpath expr="//header" position="replace">
                <header>
                    <button name="validate" states="draft" string="Xác nhận" type="object" class="oe_highlight"/>
                    <button name="destroy_assets" string="Hủy tài sản" type="object" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'open')]}"/>
                    <button name="button_liquidation" string="Thanh lý" type="object" class="oe_highlight" attrs="{'invisible': [('state', 'not in', ['open', 'transfer_to_warehouse'])]}"/>
                    <button name="transfer_to_warehouse" string="Chuyển về kho" type="object" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'open')]}"/>
                    <button name="set_to_draft" string="Thiết lập về nháp" type="object" attrs="{'invisible': ['|', ('depreciation_entries_count', '!=', 0), ('state', '!=', 'open')]}"/>
                    <button name="set_to_running" string="Đặt lại là đang dùng" type="object" attrs="{'invisible': [('state', 'not in', ['close', 'transfer_to_warehouse'])]}"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,open" attrs="{'invisible': [('state', '=', 'model')]}"/>
                </header>
            </xpath>
            <xpath expr="//button[@name='open_entries']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>
    <record id="ngs_view_account_asset_purchase_tree" model="ir.ui.view">
        <field name="name">ngs_view_account_asset_purchase_tree</field>
        <field name="model">account.asset</field>
        <field name="inherit_id" ref="account_asset.view_account_asset_purchase_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="replace">
                <list>
                    <field name="category"/>
                    <field name="name"/>
                    <field name="code"/>
                    <field name="employee_id"/>
                    <field name="employee_barcode"/>
                    <field name="current_location"/>
                    <field name="delivery_date"/>
                    <field name="retrieve_date"/>
                    <field name="state"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                </list>
            </xpath>
        </field>
    </record>
    <record id="ngs_view_account_asset_search" model="ir.ui.view">
        <field name="name">ngs_view_account_asset_search</field>
        <field name="model">account.asset</field>
        <field name="inherit_id" ref="account_asset.view_account_asset_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="replace">
                <search>
                    <field name="code"/>
                    <field name="name" string="Tên tài sản"/>
                    <field name="employee_barcode"/>
                    <field name="employee_id"/>
                    <separator/>
                    <filter string="Nháp" name="filter_state_draft" domain="[('state', '=', 'draft')]"/>
                    <filter string="Đang chạy" name="filter_state_open" domain="[('state', '=', 'open')]"/>
                    <filter string="Đóng" name="filter_state_close" domain="[('state', '=', 'close')]"/>
                    <separator/>
                    <group expand="0">
                        <filter string="Danh mục" name="groupby_category" context="{'group_by':'category'}"/>
                        <filter string="Nhà cung cấp" name="groupby_partner_id" context="{'group_by':'partner_id'}"/>
                        <filter string="Tên người dùng" name="groupby_employee_id" context="{'group_by':'employee_id'}"/>
                        <filter string="Mã nhân sự" name="groupby_employee_barcode" context="{'group_by':'employee_barcode'}"/>
                        <filter string="Ngày bàn giao" name="groupby_delivery_date" context="{'group_by':'delivery_date'}"/>
                        <filter string="Địa điểm hiện tại" name="groupby_current_location" context="{'group_by':'current_location'}"/>
                        <filter string="Trạng thái" name="groupby_state" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </xpath>
        </field>
    </record>


</odoo>
