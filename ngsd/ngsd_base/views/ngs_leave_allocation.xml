<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="ngs_leave_allocation_form" model="ir.ui.view">
        <field name="model">ngs.leave.allocation</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="Xác nhận" type="object" name="button_confirm" class="btn-primary" invisible="state != 'draft'"/>
                    <button string="Phân bổ" type="object" name="allocate_leave" class="btn-primary" invisible="state != 'confirm'"/>
                    <field name="state" widget="statusbar"/>
                </header>

                <sheet>
                    <div class="" style="width:50%;">
                        <h1>
                            <field name="name" placeholder="Mã phân bổ" nolabel="1"/>
                        </h1>
                    </div>
                    <group>
                        <group string="Thông tin phân bổ">
                            <label for="interval_number" string="Chu kỳ"/>
                            <div>
                                <field name="interval_number" class="oe_inline"/>
                                <field name="interval_type" class="oe_inline"/>
                            </div>
                            <field name="number_of_days"/>
                            <field name="nextcall"/>
                            <field name="period_number"/>
                             <label for="interval_number_ext"/>
                            <div>
                                <field name="interval_number_ext" class="oe_inline"/>
                                <field name="interval_type_ext" class="oe_inline"/>
                            </div>
                        </group>
                        <group string="Thông tin nhân viên">
                            <field name="holiday_type" string="Chế độ"/>
                            <field name="category_id" required="holiday_type == 'category'" invisible="holiday_type != 'category'" />
                            <field name="employee_ids" widget="many2many_tags" required="holiday_type == 'employee'" invisible="holiday_type != 'employee'"/>
                            <field name="department_id" required="holiday_type == 'department'" invisible="holiday_type != 'department'"/>
                            <field name="mode_company_id" string="Công ty" required="holiday_type == 'company'" invisible="holiday_type != 'company'"/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <record id="ngs_leave_allocation_tree" model="ir.ui.view">
        <field name="model">ngs.leave.allocation</field>
        <field name="arch" type="xml">
            <list>
                <field name="name"/>
                <field name="holiday_type"/>
                <field name="nextcall"/>
            </list>
        </field>
    </record>


    <record id="ngs_leave_allocation_act" model="ir.actions.act_window">
        <field name="res_model">ngs.leave.allocation</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="ngs_hr_leave_allocation_view_form_manager" model="ir.ui.view">
        <field name="name">ngs_hr_leave_allocation_view_form_manager</field>
        <field name="model">hr.leave.allocation</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_allocation_view_form_manager"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='date_to']" position="replace">
                <field name="stop_at" widget="date" nolabel="1" readonly="allocation_type == 'accrual' and state not in ('draft', 'confirm')" placeholder="No Limit"/>
            </xpath>
           <xpath expr="//field[@name='number_of_days']" position="after">
             <field name="date_to" widget="date" readonly="allocation_type == 'accrual' and state not in ('draft', 'confirm')"/>
             <field name="use_advance_leave"/>
             <field name="advance_leave"/>
           </xpath>

        </field>
    </record>


</odoo>