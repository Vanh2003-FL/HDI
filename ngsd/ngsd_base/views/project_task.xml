<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="account_analytic_line_confirm_wizard_form" model="ir.ui.view">
        <field name="name">Xác nhận</field>
        <field name="model">account.analytic.line.confirm.wizard</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <h5>Bạn có chắc chắn muốn gửi duyệt?</h5>
                </sheet>
                <footer>
                    <button string="Xác nhận" class="oe_highlight" type="object" name="do"/>
                    <button string="Hủy" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="hr_timesheet_line_tree" model="ir.ui.view">
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//list" position="inside">
                <field name="en_state" string="Trạng thái phê duyệt"/>
                <field name="ot_date_from" optional="hide"/>
                <field name="ot_date_to" optional="hide"/>
                <field name="ot_time" widget="float_time"/>
                <field name="ot_state"/>
                <field name="en_total_amount" optional="hide"/>
                <field name="total_hours_timesheet" optional="hide" sum="total_hours_timesheet"/>
                <field name="ot_id" optional="hide" readonly="en_state != 'new'" context="{'default_task_id':task_id}"/>
                <field name="en_sent_ok" invisible="1"/>
                <field name="en_approve_ok" invisible="1"/>
                <button string="Tăng ca" name="en_create_over_time" type="object" icon="fa-clock-o" invisible="en_state in ['waiting', 'cancel'] and not ot_id"/>
                <button string="Gửi duyệt" confirm="Bạn có chắc chắn muốn gửi duyệt?" name="en_false_button_sent" type="object" icon="fa-paper-plane" invisible="en_state != 'new' or not en_sent_ok"/>
                <button string="Duyệt" groups="hr_timesheet.group_hr_timesheet_user,ngsd_base.group_pm" name="button_confirm_approve" type="object" icon="fa-check" invisible="en_state != 'sent' or not en_approve_ok"/>
                <button string="Từ chối" groups="hr_timesheet.group_hr_timesheet_user,ngsd_base.group_pm" name="button_confirm_reject" type="object" icon="fa-times" invisible="en_state != 'sent' or not en_approve_ok"/>
                <button string="Yêu cầu hủy duyệt" name="en_button_waiting" type="object" icon="fa-paper-plane" invisible="en_state != 'approved' or not en_sent_ok"/>
                <button string="Xác nhận hủy duyệt" name="en_button_cancel2" type="object" icon="fa-check" invisible="en_state != 'waiting' or not en_approve_ok"/>
                <button string="Từ chối hủy duyệt" name="en_button_cancel_cancel" type="object" icon="fa-times" invisible="en_state != 'waiting' or not en_approve_ok"/>
                <button string="Hủy yêu cầu hủy duyệt" name="en_button_cancel_cancel" type="object" icon="fa-times" invisible="en_state != 'waiting' or not en_sent_ok"/>
            </xpath>
            <field name="date" position="attributes">
                <attribute name="readonly">en_state != 'new'</attribute>
            </field>
            <field name="date" position="before">
                <header>
                    <button string="Duyệt timesheet" name="action_approve_timesheet" type="object" class="btn btn-primary ml-2"/>
                    <button string="Từ chối timesheet" name="action_reject_timesheet" type="object" class="btn ml-2"/>
                </header>
            </field>
            <field name="task_id" position="after">
                <field name="en_project_stage_id" optional="hide"/>
                <field name="en_workpackage_id" optional="hide"/>
            </field>
            <field name="project_id" position="attributes">
                <attribute name="readonly">en_state != 'new'</attribute>
                <attribute name="options">{'no_open': True, 'no_create': True, 'no_quick_create': True, 'no_create_edit': True}</attribute>
            </field>
            <field name="project_id" position="before">
                <field name="project_code"/>
            </field>
            <xpath expr="//field[@name='employee_id']" position="after">
                <field name="department_id" string="Trung tâm theo nhân viên"/>
            </xpath>
            <xpath expr="//field[@name='project_id']" position="after">
                <field name="project_department_id" string="Trung tâm theo dự án"/>
            </xpath>
            <xpath expr="//list" position="attributes">
                <attribute name="default_order">date desc</attribute>
            </xpath>
            <field name="task_id" position="attributes">
                <attribute name="readonly">en_state != 'new'</attribute>
            </field>
            <field name="name" position="attributes">
                <attribute name="readonly">en_state != 'new'</attribute>
            </field>
            <field name="unit_amount" position="attributes">
                <attribute name="readonly">en_state != 'new'</attribute>
                <attribute name="string">Số giờ</attribute>
            </field>
        </field>
    </record>

    <record id="hr_timesheet_line_search" model="ir.ui.view">
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_search"/>
        <field name="arch" type="xml">
            <field name="date" position="before">
                <field name="name" string="Tất cả" filter_domain="[
                '|','|','|','|','|',
                ('technical_field_27607_1', 'ilike', self),
                ('employee_id', 'ilike', self),
                ('project_id', 'ilike', self),
                ('task_id', 'ilike', self),
                ('name', 'ilike', self),
                ('technical_field_27607_2', 'ilike', self),
                ]"/>
                <filter name="to_sent_filter" string="Cần duyệt" domain="[('en_state', '=', 'sent'), ('en_approver_id', '=', uid)]"/>
                <filter name="to_sent_cancel" string="Chờ hủy duyệt" domain="[('en_state', '=', 'waiting')]"/>
                <separator/>
                <filter string="Ngày hôm nay" name="filter_date_today"
                        domain="[('date', '=', context_today().strftime('%Y-%m-%d'))]"/>
                <filter string="Ngày hôm qua" name="filter_date_yesterday"
                        domain="[('date', '=', (context_today() + relativedelta(days=-1)).strftime('%Y-%m-%d'))]"/>
                <filter string="Tuần này" name="current_week"
                        domain="[('date', '&gt;=', (context_today() + relativedelta(weeks=-1,days=1, weekday=0)).strftime('%Y-%m-%d')),
                                 ('date', '&lt;=', (context_today() - relativedelta(weeks=0, weekday=-1)).strftime('%Y-%m-%d'))]"/>
                <filter string="Tuần trước" name="last_week"
                        domain="[('date', '&gt;=', ((context_today() + relativedelta(weeks=-2,days=1, weekday=0)).strftime('%Y-%m-%d'))),
                                 ('date', '&lt;=', ((context_today() + relativedelta(weeks=-1,weekday=6)).strftime('%%Y-%%m-%%d')))]"/>
            </field>
        </field>
    </record>
    <record id="sale_timesheet.timesheet_view_search" model="ir.ui.view">
        <field name="active" eval="False"/>
    </record>
    <record id="sale_timesheet.hr_timesheet_line_tree_inherit" model="ir.ui.view">
        <field name="active" eval="False"/>
    </record>
    <record id="hr_timesheet_line_calendar" model="ir.ui.view">
        <field name="model">account.analytic.line</field>
        <field name="arch" type="xml">
            <calendar date_start="date" color="employee_id">
                <field name="display_name"/>
                <field name="employee_id"/>
                <field name="unit_amount_holiday" invisible="not holiday_id and not global_leave_id"/>
                <field name="unit_amount" invisible="holiday_id or global_leave_id"/>
                <field name="ot_time" invisible="not ot_id or ot_time &lt;= 0"/>
                <field name="ot_id" invisible="1"/>
                <field name="holiday_id" invisible="1"/>
                <field name="global_leave_id" invisible="1"/>
                <field name="employee_id" filters="1" invisible="1"/>
            </calendar>
        </field>
    </record>
    <record id="hr_timesheet_line_calendar_month_mode" model="ir.ui.view">
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet_line_calendar"/>
        <field name="arch" type="xml">
            <xpath expr="//calendar" position="attributes">
                <attribute name="mode">month</attribute>
            </xpath>
        </field>
    </record>

    <record id="ngs_timesheet_line_form" model="ir.ui.view">
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_form"/>
        <field name="arch" type="xml">
            <field name="project_id" position="attributes">
                <attribute name="context">{}</attribute>
            </field>
        </field>
    </record>

    <record id="ts_du_an_hr_timesheet_line_form" model="ir.ui.view">
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_form"/>
        <field name="groups" value="sales_team.group_sale_salesman"/>
        <field name="arch" type="xml">
            <field name="so_line" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
        </field>
    </record>
    <record id="ts_ngoai_du_an_hr_timesheet_line_form" model="ir.ui.view">
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_form"/>
        <field name="mode">primary</field>
        <field name="priority">10000</field>
        <field name="arch" type="xml">
            <field name="project_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="task_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="project_id" position="after">
                <field name="en_nonproject_task_id" readonly="1" force_save="1"/>
            </field>
        </field>
    </record>

    <record id="hr_timesheet.timesheet_action_all" model="ir.actions.act_window">
        <field name="domain">[('en_nonproject_task_id', '=', False), ('global_leave_id', '=', False), ('project_id.active', '=', True)]</field>
        <field name="context">{
            'search_default_week':1,
            'search_default_to_sent_filter':1,
            'create': 0,
            'edit': 0
        }</field>
    </record>
    <record id="hr_timesheet.act_hr_timesheet_line" model="ir.actions.act_window">
        <field name="domain">[('project_id', '!=', False), ('user_id', '=', uid), ('global_leave_id', '=', False), ('project_id.active', '=', True)]</field>
        <field name="context">{
            'search_default_week':1,
            'create': 0,
            'edit': 0
        }</field>
    </record>


    <record id="timesheet_action_all_calendar" model="ir.actions.act_window.view">
        <field name="sequence" eval="5"/>
        <field name="view_mode">calendar</field>
        <field name="view_id" ref="hr_timesheet_line_calendar"/>
        <field name="act_window_id" ref="hr_timesheet.timesheet_action_all"/>
    </record>
    <record id="act_hr_timesheet_line_calendar" model="ir.actions.act_window.view">
        <field name="sequence" eval="5"/>
        <field name="view_mode">calendar</field>
        <field name="view_id" ref="hr_timesheet_line_calendar"/>
        <field name="act_window_id" ref="hr_timesheet.act_hr_timesheet_line"/>
    </record>

    <record id="timesheet_action_view_from_employee_calendar" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">calendar</field>
        <field name="view_id" ref="hr_timesheet_line_calendar_month_mode"/>
        <field name="act_window_id" ref="hr_timesheet.timesheet_action_from_employee"/>
    </record>

    <record id="personal_task_type_edit" model="ir.ui.view">
        <field name="inherit_id" ref="project.personal_task_type_edit"/>
        <field name="arch" type="xml">
            <field name="name" position="after">
                <field name="en_mark"/>
            </field>
        </field>
    </record>

    <record id="view_task_tree2" model="ir.ui.view">
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <field name="user_ids" position="after">
                <field name="en_handler"/>
                <field name="decoration" invisible="1"/>
            </field>
            <field name="user_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="partner_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="tag_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="planned_hours" position="attributes">
                <attribute name="widget"></attribute>
            </field>
            <field name="remaining_hours" position="attributes">
                <attribute name="widget"></attribute>
            </field>
            <field name="progress" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="kanban_state" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <xpath expr="//list" position="attributes">
                <attribute name="decoration-danger">decoration == 'danger'</attribute>
                <attribute name="decoration-warning">decoration == 'warning'</attribute>
            </xpath>
            <xpath expr="//field[@name='date_deadline']" position="replace">
                <field name="date_deadline" optional="hide" widget="remaining_days"/>
            </xpath>
        </field>
    </record>

    <record id="view_task_in_wbs_view_tree" model="ir.ui.view">
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="mode">primary</field>
        <field name="priority">10000</field>
        <field name="arch" type="xml">
            <xpath expr="//list" position="attributes">
                <attribute name="class">allow_list_copy</attribute>
            </xpath>
            <field name="date_deadline" position="before">
                <field name="en_start_date"/>
                <field name="en_wbs_old_id" invisible="1"/>
            </field>
            <xpath expr="//field[@name='date_deadline']" position="attributes">
                <attribute name="widget"></attribute>
            </xpath>
            <field name="project_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="company_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="activity_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
        </field>
    </record>

    <record id="view_task_search_form_extended" model="ir.ui.view">
        <field name="inherit_id" ref="project.view_task_search_form_extended"/>
        <field name="arch" type="xml">
            <filter name="personal_stage" position="attributes">
                <attribute name="invisible">1</attribute>
            </filter>
            <filter name="sale_line_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </filter>
            <filter name="kanban_state" position="attributes">
                <attribute name="invisible">1</attribute>
            </filter>
        </field>
    </record>
    <record id="task_type_edit" model="ir.ui.view">
        <field name="inherit_id" ref="project.task_type_edit"/>
        <field name="arch" type="xml">
            <field name="name" position="after">
                <field name="en_mark"/>
            </field>
        </field>
    </record>

    <record id="view_task_search_form" model="ir.ui.view">
        <field name="inherit_id" ref="project.view_task_search_form"/>
        <field name="arch" type="xml">
            <filter name="late" position="before">
                <filter string="Được làm hôm nay" name="en_timesheet_today" domain="[('timesheet_ids.date', '=', context_today().strftime('%Y-%m-%d'))]"/>
            </filter>
            <filter name="my_tasks" position="replace">
                <filter string="Nhiệm vụ của tôi" name="my_tasks" domain="[('en_handler', '=', uid)]"/>
            </filter>
        </field>
    </record>

    <record id="hr_timesheet.view_task_form2_inherited" model="ir.ui.view">
        <field name="groups" value="ngsd_base.group_qam,ngsd_base.group_nd_xbcckm"/>
    </record>

    <record id="view_task_form2_inherited" model="ir.ui.view">
        <field name="inherit_id" ref="hr_timesheet.view_task_form2_inherited"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='timesheet_ids']//list//field[@name='date']" position="attributes">
                <attribute name="readonly">en_state != 'new'</attribute>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']//list//field[@name='employee_id']" position="attributes">
                <attribute name="readonly">en_state != 'new'</attribute>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']//list//field[@name='unit_amount']" position="attributes">
                <attribute name="string">Số giờ</attribute>
                <attribute name="readonly">en_state != 'new'</attribute>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']//list//field[@name='name']" position="attributes">
                <attribute name="required">1</attribute>
                <attribute name="readonly">en_state != 'new'</attribute>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']//list" position="attributes">
                <attribute name="default_order">date desc</attribute>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']//list//field[@name='unit_amount']" position="after">
                <field name="ot_id" domain="[('task_id','=',parent.id)]" context="{'default_task_id':parent.id}" readonly="en_state != 'new'" options="{'no_quick_create':True, 'no_create': True}" optional="hide"/>
                <field name="ot_time" widget="float_time"/>
                <field name="ot_state"/>
                <field name="ot_date_from" optional="hide"/>
                <field name="ot_date_to" optional="hide"/>
                <field name="en_state" invisible="0"/>
                <field name="request_date"/>
                <field name="approver"/>
                <field name="approve_date"/>
                <field name="en_approve_ok" invisible="1"/>
                <field name="en_sent_ok" invisible="1"/>
                <field name="en_total_amount" optional="hide" widget="timesheet_uom"/>
                <field name="total_hours_timesheet" optional="hide"/>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']//list" position="inside">
                <button string="Tăng ca" name="en_create_over_time" type="object" icon="fa-clock-o" invisible="en_state in ['waiting', 'cancel'] and not ot_id"/>
                <button string="Gửi duyệt" confirm="Bạn có chắc chắn muốn gửi duyệt?" name="en_button_sent" type="object" icon="fa-paper-plane" invisible="en_state != 'new' or not en_sent_ok"/>
                <button string="Duyệt" confirm="Duyệt yêu cầu, tiếp tục?" groups="hr_timesheet.group_hr_timesheet_user,ngsd_base.group_pm" name="en_button_approved" type="object" icon="fa-check" invisible="en_state != 'sent' or not en_approve_ok"/>
                <button string="Từ chối" confirm="Từ chối yêu cầu, tiếp tục?" groups="hr_timesheet.group_hr_timesheet_user,ngsd_base.group_pm" name="en_button_cancel" type="object" icon="fa-times" invisible="en_state != 'sent' or not en_approve_ok"/>
                <button string="Yêu cầu hủy duyệt" name="en_button_waiting" type="object" icon="fa-paper-plane" invisible="en_state != 'approved' or not en_sent_ok"/>
                <button string="Xác nhận hủy duyệt" name="en_button_cancel2" type="object" icon="fa-check" invisible="en_state != 'waiting' or not en_approve_ok"/>
                <button string="Từ chối hủy duyệt" name="en_button_cancel_cancel" type="object" icon="fa-times" invisible="en_state != 'waiting' or not en_approve_ok"/>
                <button string="Hủy yêu cầu hủy duyệt" name="en_button_cancel_cancel" type="object" icon="fa-times" invisible="en_state != 'waiting' or not en_sent_ok"/>
                <button string=" " name="button_en_copy" type="object" icon="fa-clipboard"/>
            </xpath>
            <xpath expr="//field[@name='user_ids']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']" position="before">
                <field name="technical_field_selection" invisible="1"/>
                <field name="en_wbs_state" invisible="1"/>
                <field name="resource_planning_id" invisible="1"/>
                <field name="en_wbs_old_id" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='timesheet_ids']" position="attributes">
                <attribute name="invisible">not allow_timesheets</attribute>
                <attribute name="readonly">technical_field_selection not in ['c', 'f'] or en_wbs_state != 'approved' or not resource_planning_id</attribute>
            </xpath>
            <xpath expr="//field[@name='stage_id']" position="before">
                <field name="a_ok" invisible="1"/>
                <field name="b_ok" invisible="1"/>
                <field name="c_ok" invisible="1"/>
                <field name="d_ok" invisible="1"/>
                <field name="e_ok" invisible="1"/>
                <field name="f_ok" invisible="1"/>
                <button name="button_en_a" type="object" string="Thực hiện" invisible="not a_ok" groups="ngsd_base.group_pm,ngsd_base.group_tvda"/>
                <button name="button_en_b" type="object" string="Hủy" invisible="not b_ok" groups="ngsd_base.group_pm,ngsd_base.group_tvda"/>
                <button name="button_en_c" type="object" string="Gửi xem xét" invisible="not c_ok"/>
                <button name="button_en_d" type="object" string="Trì hoãn" invisible="not d_ok" groups="ngsd_base.group_pm,ngsd_base.group_tvda"/>
                <button name="button_en_e" type="object" string="Làm lại" invisible="not e_ok" groups="ngsd_base.group_pm,ngsd_base.group_tvda"/>
                <button name="button_en_f" type="object" string="Hoàn thành" invisible="not f_ok"/>
            </xpath>
            <xpath expr="//field[@name='stage_id']" position="attributes">
                <attribute name="options">{}</attribute>
                <attribute name="force_save">1</attribute>
            </xpath>
            <xpath expr="//page[@id='timesheets_tab']" position="attributes">
                <attribute name="string">Timesheet</attribute>
            </xpath>
            <xpath expr="//button[@name='action_assign_to_me']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='tag_ids']" position="before">
                <xpath expr="//page[@id='timesheets_tab']//group//group//div[hasclass('o_td_label')]" position="move"/>
                <field name="planned_hours" position="move"/>
            </xpath>
            <field name="planned_hours" position="attributes">
                <attribute name="widget"></attribute>
            </field>
        </field>
    </record>

    <record id="project.act_project_project_2_project_task_all" model="ir.actions.act_window">
        <field name="view_mode">tree,form,calendar,pivot,graph,activity</field>
        <field name="domain">[('display_project_id', '=', active_id), ('en_wbs_state', '=', 'approved')]</field>
        <field name="context">{'pivot_row_groupby': ['user_ids'],
                               'default_project_id': active_id,
                               'show_project_update': True,
                               'create': 1}</field>
    </record>
    <record id="view_task_form2" model="ir.ui.view">
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="priority">23071993</field>
        <field name="arch" type="xml">
            <label for="project_id" position="before">
                <field name="en_task_position" invisible="0" force_save="1" options="{'no_create': True, 'no_open': True}"/>
                <field name="en_wbs_id" invisible="1"/>
                <field name="en_task_position_ids" invisible="1"/>
                <field name="resource_planning_id" invisible="1"/>
            </label>
            <field name="user_ids" position="before">
                <field name="technical_field_27450" invisible="1" widget="many2many_tags"/>
                <field name="en_requester" domain="[('id','in',technical_field_27450)]" options="{'no_open':True,'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
            </field>
            <field name="user_ids" position="after">
                <field name="technical_field_27026" invisible="1" widget="many2many_tags"/>
                <field name="en_supervisor" domain="[('id','in',technical_field_27026)]" required="en_requester" options="{'no_open':True,'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                <field name="en_handler" required="1" domain="[('id','in',technical_field_27450)]" options="{'no_open':True,'no_create':True,'no_quick_create':True,'no_create_edit':True}"/>
                <field name="en_approver_id"/>
            </field>
            <field name="partner_id" position="before">
                <field name="en_task_code"/>
            </field>
            <field name="partner_id" position="after">
                <field name="en_start_date"/>
            </field>
            <field name="tag_ids" position="after">
                <field name="en_remaining_hours" invisible="1"/>
                <field name="en_progress" widget="percentage"/>
                <field name="crm_lead_id" required="is_pm_crm and project_presale" readonly="not is_pm_crm" invisible="not project_presale" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"/>
                <field name="project_presale" invisible="1"/>
                <field name="is_pm_crm" invisible="1"/>
            </field>
            <field name="date_last_stage_update" position="after">
                <field name="en_open_date"/>
                <field name="en_close_date"/>
                <field name="en_real_time" invisible="1"/>
            </field>
            <xpath expr="//field[hasclass('o_project_task_project_field')]" position="attributes">
                <attribute name="readonly">1</attribute>
                <attribute name="force_save">1</attribute>
            </xpath>
            <field name="partner_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="tag_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="user_ids" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <page name="extra_info" position="attributes">
                <attribute name="groups"/>
            </page>
            <field name="progress" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <page name="sub_tasks_page" position="attributes">
                <attribute name="invisible">1</attribute>
            </page>
            <page name="task_dependencies" position="attributes">
                <attribute name="invisible">1</attribute>
            </page>
            <xpath expr="//field[@name='stage_id']" position="attributes">
                <attribute name="options">{'clickable': '1'}</attribute>
            </xpath>
            <xpath expr="//field[@name='date_deadline']" position="replace">
                <field name="date_deadline"/>
            </xpath>
            <xpath expr="//page[@name='extra_info']/group/group[4]" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

        </field>
    </record>

    <record id="primary_view_task_form1" model="ir.ui.view">
        <field name="inherit_id" ref="view_task_form2"/>
        <field name="mode">primary</field>
        <field name="priority">100</field>
        <field name="arch" type="xml">
            <field name="en_task_position" position="after"/>
        </field>
    </record>
    <record id="primary_view_task_form2" model="ir.ui.view">
        <field name="inherit_id" ref="view_task_form2"/>
        <field name="priority">200</field>
        <field name="mode">primary</field>
        <field name="arch" type="xml">
            <field name="en_task_position" position="replace"/>
        </field>
    </record>


    <record id="project_task_tree" model="ir.ui.view">
        <field name="model">project.task</field>
        <field name="priority">23071993</field>
        <field name="arch" type="xml">
            <list>
                <field name="en_task_code"/>
                <field name="name"/>
                <field name="technical_field_27450" widget="many2many_tags" invisible="1"/>
                <field name="en_handler" required="1" domain="[('id','in',technical_field_27450)]"/>
                <field name="en_start_date"/>
                <field name="date_deadline"/>
                <field name="stage_id" invisible="1"/>
                <field name="en_wbs_old_id" invisible="1"/>
            </list>
        </field>
    </record>

    <record id="project_task_act" model="ir.actions.act_window">
        <field name="res_model">project.task</field>
        <field name="view_mode">tree,form</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {&quot;view_mode&quot;: &quot;list&quot;, &quot;view_id&quot;: ref('ngsd_base.project_task_tree')}),
            (0, 0, {&quot;view_mode&quot;: &quot;form&quot;, &quot;view_id&quot;: ref('project.view_task_form2')})]"/>
    </record>

    <record id="hr_timesheet_line_non_project_tree" model="ir.ui.view">
        <field name="priority">200</field>
        <field name="model">account.analytic.line</field>
        <field name="arch" type="xml">
            <list editable="bottom" string="Timesheet Activities" default_order="date desc">
                <header>
                    <button string="Duyệt timesheet" name="action_approve_timesheet" type="object" class="btn btn-primary"/>
                    <button string="Từ chối timesheet" name="action_reject_timesheet" type="object"/>
                    <button string="Chuyển timesheet" name="action_change_task_timesheet" type="object"/>
                </header>
                <field name="date"/>
                <field name="department_id" string="Trung tâm theo nhân viên"/>
                <field name="employee_id" required="1" widget="many2one_avatar_employee" context="{'active_test': True}"/>
                <field name="en_nonproject_task_id" required="1"/>
                <field name="name"/>
                <field name="unit_amount" widget="timesheet_uom" decoration-danger="unit_amount &gt; 24"/>
                <field name="ot_time" widget="float_time"/>
                <field name="ot_state"/>
                <field name="ot_date_from" optional="hide"/>
                <field name="ot_date_to" optional="hide"/>
                <field name="en_state"/>
                <field name="request_date"/>
                <field name="approver"/>
                <field name="approve_date"/>
                <field name="ot_id" invisible="1"/>
                <field name="en_approve_ok" invisible="1"/>
                <field name="en_sent_ok" invisible="1"/>
                <field name="en_total_amount" optional="hide" widget="timesheet_uom"/>
                <field name="total_hours_timesheet" optional="hide" widget="timesheet_uom" sum="total_hours_timesheet"/>
                <field name="company_id" invisible="1"/>
                <field name="user_id" invisible="1"/>
                <field name="project_id" invisible="1"/>
                <button string="Tăng ca" name="en_create_over_time_nonproject" type="object" icon="fa-clock-o" invisible="en_state in ['waiting', 'cancel'] and not ot_id"/>
                <button string="Gửi duyệt" confirm="Bạn có chắc chắn muốn gửi duyệt?" name="en_false_button_sent" type="object" icon="fa-paper-plane" invisible="en_state != 'new' or not en_sent_ok"/>
                <button string="Duyệt" name="button_confirm_approve" type="object" icon="fa-check" invisible="en_state != 'sent' or not en_approve_ok"/>
                <button string="Từ chối" name="button_confirm_reject" type="object" icon="fa-times" invisible="en_state != 'sent' or not en_approve_ok"/>
                <button string="Yêu cầu hủy duyệt" name="en_button_waiting" type="object" icon="fa-paper-plane" invisible="en_state != 'approved' or not en_sent_ok"/>
                <button string="Xác nhận hủy duyệt" name="en_button_cancel2" type="object" icon="fa-check" invisible="en_state != 'waiting' or not en_approve_ok"/>
                <button string="Từ chối hủy duyệt" name="en_button_cancel_cancel" type="object" icon="fa-times" invisible="en_state != 'waiting' or not en_approve_ok"/>
                <button string="Hủy yêu cầu hủy duyệt" name="en_button_cancel_cancel" type="object" icon="fa-times" invisible="en_state != 'waiting' or not en_sent_ok"/>

            </list>
        </field>
    </record>


    <record id="act_hr_timesheet_nonproject_line" model="ir.actions.act_window">
        <field name="name">Timesheet của tôi</field>
        <field name="res_model">account.analytic.line</field>
        <field name="view_mode">list</field>
        <field name="domain">[('en_nonproject_task_id', '!=', False), ('user_id', '=', uid)]</field>
        <field name="context">{
            'search_default_week':1,
            'create': 0,
            'edit': 0
        }</field>
        <field name="search_view_id" ref="hr_timesheet.hr_timesheet_line_my_timesheet_search"/>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'list', 'view_id': ref('ngsd_base.hr_timesheet_line_non_project_tree')})]"/>

    </record>

    <record id="timesheet_action_nonproject_all" model="ir.actions.act_window">
        <field name="name">Tất cả Timesheet</field>
        <field name="res_model">account.analytic.line</field>
        <field name="view_mode">list</field>
        <field name="search_view_id" ref="hr_timesheet.hr_timesheet_line_search"/>
        <field name="domain">[('en_nonproject_task_id', '!=', False)]</field>
        <field name="context">{
            'search_default_week':1,
            'search_default_to_sent_filter':1,
            'create': 0,
            'edit': 0
        }</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'list', 'view_id': ref('ngsd_base.hr_timesheet_line_non_project_tree')})]"/>
    </record>

</odoo>