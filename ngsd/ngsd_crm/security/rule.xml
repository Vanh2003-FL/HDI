<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="rule_model_crm_stage_all" model="ir.rule">
        <field name="name">Chỉ xem trạng thái CRM công ty mình</field>
        <field name="model_id" ref="crm.model_crm_stage"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="rule_model_crm_product_type_all" model="ir.rule">
        <field name="name">Chỉ xem Crm Product Type công ty mình</field>
        <field name="model_id" ref="ngsd_crm.model_crm_product_type"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <record id="sa_only_access_my_lead" model="ir.rule">
        <field name="name">SA Chỉ có quyền xem cơ hội của mình</field>
        <field ref="crm.model_crm_lead" name="model_id"/>
        <field name="domain_force">[('solution_architect_uids', 'in', user.ids)]</field>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.ngsd_solution_architect')])]"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    <record id="sa_access_my_partner" model="ir.rule">
        <field name="name">SA Chỉ có quyền xem khách hàng trong cơ hội gắn tên mình</field>
        <field ref="base.model_res_partner" name="model_id"/>
        <field name="domain_force">['|', ('is_customer', '=', False), ('opportunity_ids.solution_architect_uids', 'in', user.ids)]</field>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_unlink" eval="0"/>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.ngsd_solution_architect')])]"/>
    </record>

    <record id="sam_only_access_lead_my_team" model="ir.rule">
        <field name="name">SAM Chỉ có quyền xem cơ hội của nhóm mình</field>
        <field ref="crm.model_crm_lead" name="model_id"/>
        <field name="domain_force">['|', ('solution_architect_uids', 'in', user.ids), ('solution_architect_uids', 'in', user.user_my_lead_ids.ids)]</field>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.ngsd_solution_architect_manager'), ref('ngsd_base.group_sale_view_team_leads')])]"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    <record id="sam_only_access_lead_my_team_model_crm_lead" model="ir.rule">
        <field name="name">Xem cơ hội của nhóm mình</field>
        <field ref="crm.model_crm_lead" name="model_id"/>
        <field name="domain_force">['|', ('team_id.user_ids', 'in', user.ids), ('user_id', 'in', user.user_my_lead_ids.ids)]</field>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.group_sale_view_team_leads')])]"/>
    </record>
    <record id="sam_access_team_partner" model="ir.rule">
        <field name="name">SAM Chỉ có quyền xem khách hàng trong cơ hội team mình</field>
        <field ref="base.model_res_partner" name="model_id"/>
        <field name="domain_force">['|', '|', ('is_customer', '=', False), ('activity_user_ids', 'in', user.user_my_lead_ids.ids), ('opportunity_ids.solution_architect_uids', 'in', user.user_my_lead_ids.ids)]</field>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_unlink" eval="0"/>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.ngsd_solution_architect_manager'), ref('ngsd_base.group_sale_view_team_leads')])]"/>
    </record>

    <record id="group_sale_view_team_office_model_crm_lead_rule" model="ir.rule">
        <field name="name">Xem cơ hội của trung tâm mình</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="domain_force">['|',('x_consulting_team.user_ids', 'in', user.ids),('x_development_team.user_ids', 'in', user.ids)]</field>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.group_sale_view_team_office')])]"/>
    </record>

    <record id="aml_only_access_my_lead" model="ir.rule">
        <field name="name">AML Chỉ có quyền xem cơ hội của mình</field>
        <field ref="crm.model_crm_lead" name="model_id"/>
        <field name="domain_force">[('x_am_lead_ids', 'in', user.id)]</field>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.group_aml')])]"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    <record id="aml_access_my_partner" model="ir.rule">
        <field name="name">AML Chỉ có quyền xem khách hàng trong cơ hội gắn tên mình</field>
        <field ref="base.model_res_partner" name="model_id"/>
        <field name="domain_force">['|', ('is_customer', '=', False), ('opportunity_ids.x_am_lead_ids', 'in', user.id)]</field>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_unlink" eval="0"/>
        <field name="groups" eval="[(6,0, [ref('ngsd_base.group_aml')])]"/>
    </record>
    <record id="group_aml_model_crm_support_history_rule" model="ir.rule">
        <field name="name">Xem lịch sử của opp mình là AM lead</field>
        <field name="model_id" ref="ngsd_crm.model_crm_support_history"/>
        <field name="groups" eval="[(4,ref('ngsd_base.group_aml'))]"/>
        <field name="domain_force">[('x_lead_id.x_am_lead_ids', 'in', user.id)]</field>
        <field name="perm_create" eval="False"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

<!--    -->
</odoo>