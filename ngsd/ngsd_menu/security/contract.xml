<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record model="ir.module.category" id="module_category_parent_contract">
        <field name="name">Hợp đồng</field>
        <field name="sequence">6</field>
    </record>

    <record model="ir.module.category" id="module_category_contract">
        <field name="name">Hợp đồng</field>
        <field name="parent_id" ref="module_category_parent_contract"/>
        <field name="sequence">6</field>
    </record>

    <record id="group_contract_user" model="res.groups">
        <field name="name">Người dùng: Chỉ tài liệu của chính mình</field>
        <field name="category_id" ref="module_category_contract"/>
        <field name="implied_ids" eval="[(4,ref('sales_team.group_sale_salesman'))]"/>
        <field name="menu_access" eval="[(4,ref('qlbh_hd_menu'))]"/>
    </record>
    <record id="access_model_x_sale_contract_group_contract_user" model="ir.model.access">
        <field name="name">Xem hợp đồng</field>
        <field name="model_id" ref="ngsd_crm.model_x_sale_contract"/>
        <field name="group_id" ref="group_contract_user"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    <record id="group_contract_user_model_x_sale_contract_rule" model="ir.rule">
        <field name="name">Xem hợp đồng của chính mình</field>
        <field name="model_id" ref="ngsd_crm.model_x_sale_contract"/>
        <field name="groups" eval="[(4,ref('group_contract_user'))]"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
    </record>
    <record id="group_contract_user_model_account_move_rule" model="ir.rule">
        <field name="name">Xem hóa đơn hợp đồng của chính mình</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="groups" eval="[(4,ref('group_contract_user'))]"/>
        <field name="domain_force">[('contract_id.user_id', '=', user.id)]</field>
    </record>
    <record id="group_contract_user_model_account_move_rule2" model="ir.rule">
        <field name="name">Xem bút toán entry</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="groups" eval="[(4,ref('group_contract_user'))]"/>
        <field name="domain_force">[('move_type', '=', 'entry')]</field>
    </record>

    <record id="group_contract_leader" model="res.groups">
        <field name="name">Người dùng: Tài liệu của nhóm mình</field>
        <field name="category_id" ref="module_category_contract"/>
        <field name="implied_ids" eval="[(4,ref('group_contract_user'))]"/>
    </record>
    <record id="group_contract_leader_model_x_sale_contract_rule" model="ir.rule">
        <field name="name">Xem hợp đồng của đội mình</field>
        <field name="model_id" ref="ngsd_crm.model_x_sale_contract"/>
        <field name="groups" eval="[(4,ref('group_contract_leader'))]"/>
        <field name="domain_force">[('user_id.crm_team_ids.user_ids', '=', user.id)]</field>
    </record>

    <record id="group_contract_officer" model="res.groups">
        <field name="name">Người dùng: Tất cả tài liệu</field>
        <field name="category_id" ref="module_category_contract"/>
        <field name="implied_ids" eval="[(4,ref('group_contract_leader'))]"/>
    </record>
    <record id="group_contract_officer_model_x_sale_contract_rule" model="ir.rule">
        <field name="name">Xem tất cả hợp đồng</field>
        <field name="model_id" ref="ngsd_crm.model_x_sale_contract"/>
        <field name="groups" eval="[(4,ref('group_contract_officer'))]"/>
        <field name="domain_force">[]</field>
    </record>

    <record id="group_contract_manager" model="res.groups">
        <field name="name">Quản trị viên</field>
        <field name="category_id" ref="module_category_contract"/>
        <field name="implied_ids" eval="[(4,ref('group_contract_officer'))]"/>
        <field name="users" eval="[(4,ref('base.user_admin'))]"/>
    </record>
    <record id="access_model_x_sale_contract_group_contract_manager" model="ir.model.access">
        <field name="name">Tạo, xem, sửa hợp đồng</field>
        <field name="model_id" ref="ngsd_crm.model_x_sale_contract"/>
        <field name="group_id" ref="group_contract_manager"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="access_model_x_sale_contract_group_system" model="ir.model.access">
        <field name="name">Full quyền hợp đồng</field>
        <field name="model_id" ref="ngsd_crm.model_x_sale_contract"/>
        <field name="group_id" ref="base.group_system"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
</odoo>