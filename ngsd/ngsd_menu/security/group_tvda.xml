<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="ngsd_base.group_tvda" model="res.groups">
        <field name="menu_access" eval="[
        (4,ref('ngsd_menu.qlda_qlda_menu')),
        (4,ref('ngsd_menu.qlda_qlda_nv_nvct_menu')),
        (4,ref('ngsd_base.hr_overtime_menu')),
        (4,ref('ngsd_menu.qlda_qlda_nv_menu')),
        ]"/>
    </record>

    <record id="group_tvda_model_project_project_rule" model="ir.rule">
        <field name="name">Dự án mình thuộc KHNL</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain_force">[('en_resource_id.order_line.employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
    </record>

    <record id="group_tvda_model_en_hr_overtime_rule" model="ir.rule">
        <field name="name">Tăng ca chính mình</field>
        <field name="model_id" ref="ngsd_base.model_en_hr_overtime"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="group_tvda_model_en_resource_planning_rule" model="ir.rule">
        <field name="name">Xem kế hoạch nguồn lực</field>
        <field name="model_id" ref="ngsd_base.model_en_resource_planning"/>
        <field name="domain_force">[('order_line.employee_id.user_id', '=', user.id), ('state', '=', 'approved')]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    <record id="group_tvda_model_en_wbs_rule" model="ir.rule">
        <field name="name">Xem wbs</field>
        <field name="model_id" ref="ngsd_base.model_en_wbs"/>
        <field name="domain_force">[('project_id.en_resource_id.order_line.employee_id.user_id', '=', user.id), ('project_id.en_resource_id.state', '=', 'approved')]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    <record id="group_gdda_model_en_wbs_rule" model="ir.rule">
        <field name="name">Xem wbs thuộc dự án mình là giám đốc dự án</field>
        <field name="model_id" ref="ngsd_base.model_en_wbs"/>
        <field name="domain_force">[('project_id.en_project_manager_id', '=', user.id)]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
    </record>
    <record id="group_tvda_model_en_risk_rule" model="ir.rule">
        <field name="name">Quản lý rủi ro/cơ hội thuộc dự án mình tham gia</field>
        <field name="model_id" ref="ngsd_base.model_en_risk"/>
        <field name="domain_force">[('project_id.en_resource_id.order_line.employee_id.user_id', '=', user.id), ('project_id.en_resource_id.state', '=', 'approved')]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="group_tvda_model_en_problem_rule" model="ir.rule">
        <field name="name">Quản lý vấn đề thuộc dự án mình tham gia</field>
        <field name="model_id" ref="ngsd_base.model_en_problem"/>
        <field name="domain_force">[('project_id.en_resource_id.order_line.employee_id.user_id', '=', user.id), ('project_id.en_resource_id.state', '=', 'approved')]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="group_tvda_model_en_project_document_rule" model="ir.rule">
        <field name="name">Quản lý Sản phẩm bàn giao thuộc dự án mình tham gia</field>
        <field name="model_id" ref="ngsd_base.model_en_project_document"/>
        <field name="domain_force">[('project_id.en_resource_id.order_line.employee_id.user_id', '=', user.id), ('project_id.en_resource_id.state', '=', 'approved')]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="group_tvda_model_project_milestone_rule" model="ir.rule">
        <field name="name">Quản lý Mốc thời gian thuộc dự án mình tham gia</field>
        <field name="model_id" ref="project.model_project_milestone"/>
        <field name="domain_force">[('project_id.en_resource_id.order_line.employee_id.user_id', '=', user.id), ('project_id.en_resource_id.state', '=', 'approved')]</field>
        <field name="groups" eval="[(4,ref('ngsd_base.group_tvda'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
</odoo>