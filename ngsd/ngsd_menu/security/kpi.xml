<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record model="ir.module.category" id="module_category_kpi">
        <field name="name">KPI</field>
        <field name="parent_id" ref="base.module_category_sales"/>
        <field name="sequence">5</field>
    </record>

    <record id="group_kpi_user" model="res.groups">
        <field name="name">Người dùng: Chỉ tài liệu của chính mình</field>
        <field name="category_id" ref="module_category_kpi"/>
        <field name="menu_access" eval="[(4,ref('ngsd_menu.qlbh_kpi_menu')),(4,ref('account_reports.menu_kpi_action_report'))]"/>
    </record>
    <record id="access_model_en_kpi_kpi_group_kpi_user" model="ir.model.access">
        <field name="name">Xem chỉ tiêu KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_kpi"/>
        <field name="group_id" ref="group_kpi_user"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    <record id="access_model_en_kpi_line_group_kpi_user" model="ir.model.access">
        <field name="name">Xem chi tiết chỉ tiêu KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_line"/>
        <field name="group_id" ref="group_kpi_user"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    <record id="access_model_en_kpi_detail_group_kpi_user" model="ir.model.access">
        <field name="group_id" ref="group_kpi_user"/>
        <field name="name">Xem phân bổ KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_detail"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    <record id="access_model_kpi_account_report_wizard_group_kpi_user" model="ir.model.access">
        <field name="group_id" ref="group_kpi_user"/>
        <field name="name">Xem báo cáo KPI</field>
        <field name="model_id" ref="account_reports.model_kpi_account_report_wizard"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>
    <record id="group_kpi_user_model_en_kpi_kpi_rule" model="ir.rule">
        <field name="name">Xem chỉ tiêu KPI của chính mình</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_kpi"/>
        <field name="groups" eval="[(4,ref('group_kpi_user'))]"/>
        <field name="domain_force">[('sale_kpi_ids.user_id', '=', user.id)]</field>
    </record>
    <record id="group_kpi_user_model_en_kpi_line_rule" model="ir.rule">
        <field name="name">Xem chi tiết chỉ tiêu KPI của chính mình</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_line"/>
        <field name="groups" eval="[(4,ref('group_kpi_user'))]"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
    </record>
    <record id="group_kpi_user_model_en_kpi_detail_rule" model="ir.rule">
        <field name="name">Xem phân bổ KPI của chính mình</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_detail"/>
        <field name="groups" eval="[(4,ref('group_kpi_user'))]"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
    </record>
    <record id="group_kpi_user_model_kpi_account_report_wizard_rule" model="ir.rule">
        <field name="name">Xem báo cáo KPI của chính mình</field>
        <field name="model_id" ref="account_reports.model_kpi_account_report_wizard"/>
        <field name="groups" eval="[(4,ref('group_kpi_user'))]"/>
        <field name="domain_force">[('type', '=', 'sale'), ('user_ids', '=', user.id)]</field>
    </record>

    <record id="group_kpi_leader" model="res.groups">
        <field name="name">Người dùng: Tài liệu của nhóm mình</field>
        <field name="category_id" ref="module_category_kpi"/>
        <field name="implied_ids" eval="[(4,ref('group_kpi_user'))]"/>
    </record>
    <record id="group_kpi_leader_model_en_kpi_kpi_rule" model="ir.rule">
        <field name="name">Xem chỉ tiêu KPI của nhóm mình</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_kpi"/>
        <field name="groups" eval="[(4,ref('group_kpi_leader'))]"/>
        <field name="domain_force">[
            '|', '|', '|',
            ('team_kpi_ids.sale_team_id.user_ids', '=', user.id),
            ('team_kpi_ids.user_id.crm_team_ids.user_ids', '=', user.id),
            ('sale_kpi_ids.sale_team_id.user_ids', '=', user.id),
            ('sale_kpi_ids.user_id.crm_team_ids.user_ids', '=', user.id),
        ]</field>
    </record>
    <record id="group_kpi_leader_model_en_kpi_line_rule" model="ir.rule">
        <field name="name">Xem chi tiết chỉ tiêu KPI của nhóm mình</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_line"/>
        <field name="groups" eval="[(4,ref('group_kpi_leader'))]"/>
        <field name="domain_force">[
            '|',
            ('sale_team_id.user_ids', '=', user.id),
            ('user_id.crm_team_ids.user_ids', '=', user.id),
        ]</field>
    </record>
    <record id="group_kpi_leader_model_en_kpi_detail_rule" model="ir.rule">
        <field name="name">Xem phân bổ KPI của nhóm mình</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_detail"/>
        <field name="groups" eval="[(4,ref('group_kpi_leader'))]"/>
        <field name="domain_force">[
            '|',
            ('sale_team_id.user_ids', '=', user.id),
            ('user_id.crm_team_ids.user_ids', '=', user.id),
        ]</field>
    </record>
    <record id="group_kpi_leader_model_kpi_account_report_wizard_rule" model="ir.rule">
        <field name="name">Xem báo cáo KPI của nhóm mình</field>
        <field name="model_id" ref="account_reports.model_kpi_account_report_wizard"/>
        <field name="groups" eval="[(4,ref('group_kpi_leader'))]"/>
        <field name="domain_force">[('technical', '=', True)]</field>
    </record>

    <record id="group_kpi_officer" model="res.groups">
        <field name="name">Người dùng: Tất cả tài liệu</field>
        <field name="category_id" ref="module_category_kpi"/>
        <field name="implied_ids" eval="[(4,ref('group_kpi_leader'))]"/>
    </record>
    <record id="group_kpi_officer_model_en_kpi_kpi_rule" model="ir.rule">
        <field name="name">Xem tất cả chỉ tiêu KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_kpi"/>
        <field name="groups" eval="[(4,ref('group_kpi_officer'))]"/>
        <field name="domain_force">[]</field>
    </record>
    <record id="group_kpi_officer_model_en_kpi_line_rule" model="ir.rule">
        <field name="name">Xem tất cả chi tiết chỉ tiêu KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_line"/>
        <field name="groups" eval="[(4,ref('group_kpi_officer'))]"/>
        <field name="domain_force">[]</field>
    </record>
    <record id="group_kpi_officer_model_en_kpi_detail_rule" model="ir.rule">
        <field name="name">Xem tất cả phân bổ KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_detail"/>
        <field name="groups" eval="[(4,ref('group_kpi_officer'))]"/>
        <field name="domain_force">[]</field>
    </record>
    <record id="group_kpi_officer_model_kpi_account_report_wizard_rule" model="ir.rule">
        <field name="name">Xem tất cả báo cáo KPI</field>
        <field name="model_id" ref="account_reports.model_kpi_account_report_wizard"/>
        <field name="groups" eval="[(4,ref('group_kpi_officer'))]"/>
        <field name="domain_force">[]</field>
    </record>

    <record id="group_kpi_manager" model="res.groups">
        <field name="name">Quản trị viên</field>
        <field name="category_id" ref="module_category_kpi"/>
        <field name="implied_ids" eval="[(4,ref('group_kpi_officer'))]"/>
        <field name="users" eval="[(4,ref('base.user_admin'))]"/>
    </record>
    <record id="access_model_en_kpi_kpi_group_kpi_manager" model="ir.model.access">
        <field name="name">Full quyền chỉ tiêu KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_kpi"/>
        <field name="group_id" ref="group_kpi_manager"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="access_model_en_kpi_line_group_kpi_manager" model="ir.model.access">
        <field name="name">Full quyền chi tiết chỉ tiêu KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_line"/>
        <field name="group_id" ref="group_kpi_manager"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="access_model_en_kpi_detail_group_kpi_manager" model="ir.model.access">
        <field name="group_id" ref="group_kpi_manager"/>
        <field name="name">Full quyền phân bổ KPI</field>
        <field name="model_id" ref="ngsd_base.model_en_kpi_detail"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
    <record id="access_model_kpi_account_report_wizard_group_kpi_manager" model="ir.model.access">
        <field name="group_id" ref="group_kpi_manager"/>
        <field name="name">Full quyền báo cáo KPI</field>
        <field name="model_id" ref="account_reports.model_kpi_account_report_wizard"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
</odoo>